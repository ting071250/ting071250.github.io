<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="../reset.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
        integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">


    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            /* font-size: 0px; */
            border: none;
            background-color: transparent;
        }

        :root {
            --diceSize: 50px;
            --paddingInBtn: 10px;
            --textSizeInBtn: 20px;
            --tableColor: rgb(2, 59, 19);
        }

        .header {
            height: 10vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-image: linear-gradient(to right, rgb(253, 222, 47), #ffa, rgb(253, 222, 47));
            /* box-shadow: 0px 0px 5px rgb(216, 198, 41); */
        }

        h1 {
            padding: 0px;
            margin: 0px;
        }

        .mainTable {
            height: 86vh;
            min-height: 450px;
            background-color: var(--tableColor);
            margin-bottom: 2vh;
            margin-top: 2vh;
            box-shadow: 0px 0px 5px #000;
            position: relative;
            align-items: center;
        }

        #counterSide {
            margin: 30px 0px auto;
            width: calc((var(--diceSize) + 5) * 6);
            position: relative;
        }

        #ownSide {
            margin: auto 0px 30px;
            width: calc((var(--diceSize) + 5) * 6);
            position: relative;
        }

        .text {
            font-size: 20px;
            background-color: rgba(1, 20, 7, 0.5);
            color: #fff;
            position: absolute;
            margin: auto;
            padding: 10px;
        }

        #counterSide>.text {
            top: calc((var(--diceSize) + 20px));
        }

        #ownSide>.text {
            bottom: calc((var(--diceSize) + 20px));
        }

        .diceUnit {
            padding: 5px;
        }

        .dice {
            margin: 0px auto;
            width: var(--diceSize);
            height: var(--diceSize);
            background-color: #fff;
            box-shadow: 0px 0px 10px #000;
            border-radius: calc(var(--diceSize) / 10);
            padding-left: calc(var(--diceSize) / 10);
            padding-right: calc(var(--diceSize) / 10);
            display: none;
        }

        .dice.covered {
            background-color: var(--tableColor);
            border: dashed 1px black;
            /* color: #fff; */
            /* font-size: 30px; */
            transition: .3s;
        }

        .dice.covered span {
            background-color: var(--tableColor);
        }

        .strip {
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
        }

        .strip>span {
            width: calc(var(--diceSize) / 5);
            height: calc(var(--diceSize) / 5);
            background-color: #000;
            border-radius: 50%;
            margin: auto;
        }

        .diceIncline {
            transform: rotate(45deg);
        }

        .diceRed span {
            background-color: red;
        }

        .dice.active {
            display: flex;
        }

        #startArea,
        #selectArea,
        #catchOrNotArea {
            width: 350px;
            background-color: #ffffff80;
            margin: auto;
            position: absolute;
            top: 0px;
            bottom: 20%;
            right: 0px;
            left: 0px;
            z-index: -1;
            border-radius: 5px;
            transition: .3s;
        }

        #startArea.areaShow,
        #selectArea.areaShow,
        #catchOrNotArea.areaShow {
            z-index: 1;
            bottom: 0px;
            transition: .3s;
        }

        #startArea {
            height: calc(1 * (var(--textSizeInBtn) + 4 * var(--paddingInBtn)));
        }

        #catchOrNotArea {
            height: calc(1 * (var(--textSizeInBtn) + 4 * var(--paddingInBtn)));
        }

        #selectArea {
            height: calc(2 * (var(--textSizeInBtn) + 4 * var(--paddingInBtn)));
        }

        #startArea .col,
        #selectArea .col,
        #catchOrNotArea .col {
            padding-top: var(--paddingInBtn);
            padding-bottom: var(--paddingInBtn);
            text-align: center;
        }

        button {
            width: 100%;
            font-size: var(--textSizeInBtn);
            padding: var(--paddingInBtn);
        }

        option[disabled] {
            background-color: rgb(204, 201, 201);
        }

        #inform {
            width: 100px;
            font-size: 20px;
            position: absolute;
            border-radius: 5px;
            left: 20px;
            top: 20px;
            background-color: #ffffff80;
            text-align: center;
        }
    </style>

    <title>Little Dice</title>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-NZ5VJ56');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NZ5VJ56" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="header">
        <h1>骰子吹牛</h1>
    </div>
    <div class="container">
        <div class="mainTable row flex-column">
            <div id="inform" class="d-none">
                <span>現在: </span>
                <p></p>
            </div>
            <div id="counterSide" class="d-flex justify-content-center">
                <div class="text me-auto">對方</div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="ownSide" class="d-flex justify-content-center">
                <div class="text me-auto">己方</div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="diceUnit col">
                    <div dotVal="oneDot" class="dice diceRed active">
                        <div class="strip">
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="twoDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="threeDot" class="dice">
                        <div class="strip diceIncline">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fourDot" class="dice diceRed">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="fiveDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div dotVal="sixDot" class="dice">
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="strip">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="startArea">
                <div class="row">
                    <div class="col col-12">
                        <button id="startBtn" onclick="startGame()" class="btn btn-primary">Start</button>
                    </div>
                </div>
            </div>
            <div id="catchOrNotArea">
                <div class="row">
                    <div class="col col-6">
                        <button id="catchBtn" class="btn btn-warning" onclick="toCatch()">抓</button>
                    </div>
                    <div class="col col-6">
                        <button id="notCatchBtn" class="btn btn-success" onclick="notToCatch()">不抓</button>
                    </div>
                </div>
            </div>
            <div id="selectArea">
                <div class="row align-items-center">
                    <div class="col col-md-5">
                        <select id="amountSelector" class="form-select" aria-label="Default select example">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
                    <div class="col"><span>個</span></div>
                    <div class="col col-md-5">
                        <select id="dotSelector" class="form-select" aria-label="Default select example">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                    <div class="col col-12">
                        <button id="confirmBtn" class="btn btn-primary" onclick="setAmountAndDot()">確定</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script>
        const dots = [
            { num: 1, str: 'oneDot' },
            { num: 2, str: 'twoDot' },
            { num: 3, str: 'threeDot' },
            { num: 4, str: 'fourDot' },
            { num: 5, str: 'fiveDot' },
            { num: 6, str: 'sixDot' }
        ]

        const counterSide = document.querySelector('#counterSide')
        const ownSide = document.querySelector('#ownSide')

        const startArea = document.querySelector('#startArea')
        const startBtn = document.querySelector('#startBtn')

        //todo: 改用modal??
        const inform = document.querySelector('#inform')
        const catchOrNotArea = document.querySelector('#catchOrNotArea')
        const catchBtn = document.querySelector('#catchBtn')
        const notCatchBtn = document.querySelector('#notCatchBtn')

        const selectArea = document.querySelector('#selectArea')
        const amountSelector = document.querySelector('#amountSelector')
        const dotSelector = document.querySelector('#dotSelector')
        const confirmBtn = document.querySelector('#confirmBtn')

        const Areas = [startArea, catchOrNotArea, selectArea]

        let round = 0
        let currentDotAmount = { dot: 0, amount: 0 }
        let initDotAmount = {
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 0,
            6: 0
        }
        let ownDotAmount
        let counterDotAmount
        let totalDotAmount
        let isMyturn = true
        let NotCatch

        window.onload = function () {
            switchShowingArea(true, startArea)
        }

        async function startGame() {
            //todo: 隨機決定誰先

            ownDotAmount = { ...initDotAmount }
            counterDotAmount = { ...initDotAmount }
            currentDotAmount = { dot: 0, amount: 0 }
            amountSelector.value = 1
            dotSelector.value = 1
            inform.setAttribute('class', 'd-none')
            inform.querySelector('p').innerText = ''

            switchShowingArea(false)

            setTimeout(() => {
                // counterSide.querySelectorAll('.dice').forEach(x => {
                //     x.classList.add('covered')
                // })
                let diceUnits = counterSide.querySelectorAll('.diceUnit')
                let idx = 0
                let interval = setInterval(() => {
                    if (idx > 5) {
                        clearInterval(interval)
                        return
                    }
                    diceUnits[idx].querySelectorAll('.dice').forEach(x => {
                        x.classList.add('covered')
                    })
                    idx++
                }, 100);
            }, 1000)
            await Promise.all([rollDices(counterSide, counterDotAmount), rollDices(ownSide, ownDotAmount)])

            totalDotAmount = { ...initDotAmount }
            for (let i = 1; i <= 6; i++) {
                totalDotAmount[i] = ownDotAmount[i] + counterDotAmount[i]
            }

            if (NotCatch == undefined || NotCatch == true) switchShowingArea(true, selectArea)
        }

        function rollDices(side, obj) {

            // let finalDice

            // for (let currentStep = 0; currentStep <= fullSteps; currentStep++) {
            //     if (currentStep > (fullSteps * 2 / 3)) timeInterval += 10

            //     setTimeout(function () {
            //         let dice = changeDice(diceUnit)
            //         if (currentStep == fullSteps) {
            //             obj[dice] += 1
            //         }
            //     }, timeInterval * currentStep)
            // }
            return new Promise((resolve, reject) => {
                side.querySelectorAll('.diceUnit').forEach((diceUnit) => {
                    let fullSteps = getRandom(20, 30)
                    let currentStep = 0
                    let timeInterval = 100
                    let dice

                    let intervalID = setInterval(() => {
                        if (currentStep > (fullSteps * 2 / 3)) timeInterval += 10
                        currentStep++
                        if (currentStep != fullSteps) {
                            dice = changeDice(diceUnit)
                        }
                        else {
                            clearInterval(intervalID)
                            obj[dice] += 1
                            if (Object.values(obj).reduce((x, y) => x + y) == 6) {
                                return resolve(obj)
                            }
                        }
                    }, timeInterval);
                })
            })
        }

        function changeDice(diceUnit) {
            let currentDice = diceUnit.querySelector('.dice.active')
            let currentDot = Array.from(diceUnit.querySelectorAll('.dice')).indexOf(currentDice) + 1
            currentDice.classList.remove('active')

            let newDot = currentDot

            while (newDot == currentDot) {
                newDot = getRandom(1, 6)
            }

            //更新骰子
            currentDice = diceUnit.querySelector(`[dotVal=${dots.find(x => x.num == newDot).str}]`)
            currentDice.classList.add('active')
            currentDot = newDot
            return currentDot
        }

        //第一個參數為bool，代表有沒有area要被開啟，true的話一定要有第二個參數
        function switchShowingArea(hasArea, ...Area) {
            Areas.forEach(x => x.removeAttribute('class'))
            if (hasArea) Area[0].setAttribute('class', 'areaShow')
        }

        function setAmountAndDot() {
            //更新喊的點數數量
            if (currentDotAmount.amount >= parseInt(amountSelector.value) &&
                currentDotAmount.dot >= parseInt(dotSelector.value)) {
                alert('數量或點數必須提升!')
                return
            }
            currentDotAmount.amount = parseInt(amountSelector.value)
            currentDotAmount.dot = parseInt(dotSelector.value)
            inform.setAttribute('class', 'd-block')
            inform.querySelector('p').innerText = `${currentDotAmount.amount} 個 ${currentDotAmount.dot}`
            turnToCounterSide()
        }

        function turnToCounterSide() {
            switchShowingArea(false)
            isMyturn = false

            //電腦動作
            setTimeout(() => {
                counterMove()
            }, 3000);
        }

        function counterMove() {
            if (currentDotAmount.amount > counterDotAmount[currentDotAmount.dot] + 2 ||
                (currentDotAmount.amount >= 6 && currentDotAmount.dot >= 6)) {
                alert('對方抓你!')
                toCatch()
                return
            }
            //todo: 根據counter的點數與現在喊的點數決定怎麼喊
            let amount = 0
            let dot = 0
            while (currentDotAmount.amount >= amount &&
                currentDotAmount.dot >= dot) {
                amount = getRandom(1, 6)
                dot = getRandom(1, 6)
            }
            currentDotAmount.amount = amount
            currentDotAmount.dot = dot
            alert(`對方喊${amount}個${dot}`)
            inform.querySelector('p').innerText = `${currentDotAmount.amount} 個 ${currentDotAmount.dot}`

            switchShowingArea(true, catchOrNotArea)
            isMyturn = true
        }

        function toCatch() {
            //抓! 計算雙方各點數的數量，與目前喊得點數數量做比對
            counterSide.querySelectorAll('.dice').forEach(x => {
                x.classList.remove('covered')
            })
            alert(`總共有${totalDotAmount[currentDotAmount.dot]}個${currentDotAmount.dot}`)

            if (totalDotAmount[currentDotAmount.dot] < currentDotAmount.amount) {
                alert('抓到ㄌ!!')
                alert(isMyturn ? '你贏ㄌ!' : '你輸ㄌ..')
            }
            else {
                alert('抓錯ㄌ')
                alert(isMyturn ? '失敗QQ' : '哈哈哈')
            }

            switchShowingArea(true, startArea)
        }

        function notToCatch() {
            //不抓! 顯示selectArea
            switchShowingArea(true, selectArea)
            setSelectors()
        }

        function setSelectors() {
            let amountOpt = amountSelector.querySelectorAll('option')
            let dotOpt = dotSelector.querySelectorAll('option')
            amountOpt.forEach(x => x.removeAttribute('hidden'))
            dotOpt.forEach(x => x.removeAttribute('hidden'))

            //todo: 根據現在喊的點數數量限制selector?
            amountSelector.onchange = function () {
                console.log('change!')
            }
        }

        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min
        }

    </script>
</body>

</html>